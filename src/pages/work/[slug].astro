---
import Layout from "@/layouts/Layout.astro";
import { getCollection } from "astro:content";
import WorkSingleView from "@/views/work/single/index.astro";
import dataSite from "@/data/data.json";
import getUrlImage from "@/components/image/getUrlImage";

export async function getStaticPaths() {
  const portfolioData = await getCollection("portfolio");
  return portfolioData.map((work) => ({
    params: { slug: work.slug },
    props: { work },
  }));
}

const { work } = Astro.props;
const { title, description, thumbnail } = work.data;

const { title: titleWork } = dataSite.sitemap.work;
---

<Layout
  title={`${title} - ${titleWork}`}
  description={description}
  image={getUrlImage("/img/portfolio", thumbnail)}
>
  <WorkSingleView work={work} />
</Layout>
